<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>I Promised: No Alcohol ‚Äî Countdown + Emoji Game</title>
<style>
  html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,sans-serif;color:#fff;overflow:hidden;background:#000}

  /* Arka plan resmi */
  body::before{
    content:""; position:fixed; inset:0; z-index:0;
    background:url("bg.jpg") center/cover no-repeat fixed;
  }
  body::after{
    content:""; position:fixed; inset:0; z-index:1;
    background:radial-gradient(ellipse at center, rgba(0,0,0,.2) 0%, rgba(0,0,0,.5) 70%, rgba(0,0,0,.75) 100%);
    pointer-events:none;
  }

  #bgvid{
    position:fixed; z-index:0; pointer-events:none;
    width:40vw; height:auto; max-width:100%; background:#000;
    left:0; top:0;
  }
  .overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:1 }

  #gameCanvas{ position:fixed; inset:0; z-index:2; display:none; }

  .card{
    position:relative; z-index:3; max-width:820px; margin:22px auto; padding:26px;
    background:rgba(0,0,0,.55); border-radius:18px; text-align:center;
  }
  h1{margin:0 0 6px}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:14px 0}
  .box{background:rgba(255,255,255,.10);padding:14px;border-radius:12px}
  .num{font-size:32px;font-weight:800}
  .lbl{font-size:12px;opacity:.85}

  .controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:12px}
  .btn{background:#fff;color:#111;font-weight:800;border:none;border-radius:999px;padding:10px 14px;cursor:pointer}
  .btn:active{transform:scale(.98)}

  #startOverlay{position:fixed;inset:0;z-index:6;display:grid;place-items:center;background:rgba(0,0,0,.55)}
  #startOverlay button{font-size:16px;font-weight:900;padding:14px 18px;border-radius:999px;border:none;cursor:pointer}

  .modal{position:fixed;inset:0;z-index:7;display:none;background:rgba(0,0,0,.55);align-items:center;justify-content:center}
  .modal-card{background:rgba(0,0,0,.78);border-radius:16px;padding:22px;width:min(90vw,360px);text-align:center}
  .modal .actions{display:flex;gap:10px;justify-content:center;margin-top:12px}
</style>
</head>
<body>
  <video id="bgvid" preload="auto" muted playsinline loop>
    <source src="video.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <main class="card">
    <h1>I Promised: No Alcohol ‚è≥</h1>
    <section class="grid">
      <div class="box"><div id="d" class="num">‚Äì</div><div class="lbl">Days</div></div>
      <div class="box"><div id="h" class="num">‚Äì</div><div class="lbl">Hours</div></div>
      <div class="box"><div id="m" class="num">‚Äì</div><div class="lbl">Minutes</div></div>
      <div class="box"><div id="s" class="num">‚Äì</div><div class="lbl">Seconds</div></div>
    </section>

    <div class="controls">
      <button id="musicToggle" class="btn">Play Music</button>
      <button id="musicMute" class="btn">Unmute</button>
    </div>

    <button id="playGameBtn" class="btn" style="margin-top:16px;display:none">Play Game</button>
    <p style="opacity:.85;margin:.4rem 0 0">Double tap/click also starts the game.</p>
  </main>

  <canvas id="gameCanvas"></canvas>

  <div id="gameOver" class="modal">
    <div class="modal-card">
      <h2>Game Over</h2>
      <p>Score: <span id="finalScore">0</span></p>
      <div class="actions">
        <button id="playAgainBtn" class="btn">Play Again</button>
        <button id="exitGameBtn" class="btn">Exit</button>
      </div>
    </div>
  </div>

  <div id="startOverlay">
    <button id="startBtn">Start (enable sound)</button>
  </div>

  <audio id="bgmusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

<script>
/* Countdown */
const DEADLINE = new Date("2025-10-07T23:59:59");
function pad(n){return String(n).padStart(2,"0")}
function tick(){
  const now=new Date(); let diff=Math.max(0,DEADLINE-now);
  const d=Math.floor(diff/86400000); diff-=d*86400000;
  const h=Math.floor(diff/3600000); diff-=h*3600000;
  const m=Math.floor(diff/60000); diff-=m*60000;
  const s=Math.floor(diff/1000);
  document.getElementById("d").textContent=d;
  document.getElementById("h").textContent=pad(h);
  document.getElementById("m").textContent=pad(m);
  document.getElementById("s").textContent=pad(s);
}
tick(); setInterval(tick,1000);

/* Music */
const music=document.getElementById("bgmusic"); let playing=false;
document.getElementById("musicToggle").onclick=()=>{if(!playing){music.play();playing=true;}else{music.pause();playing=false;}};
document.getElementById("musicMute").onclick=()=>{music.muted=!music.muted};

/* Start overlay */
document.getElementById("startBtn").onclick=()=>{
  music.play(); playing=true; music.muted=false;
  document.getElementById("bgvid").play();
  document.getElementById("startOverlay").style.display="none";
  document.getElementById("playGameBtn").style.display="inline-block";
};

/* Video hareket (bounce) */
const vid = document.getElementById('bgvid');
let posX=0,posY=0,vx=2,vy=1.5;
function moveVid(){
  const vw=vid.offsetWidth||200,vh=vid.offsetHeight||150;
  const bw=window.innerWidth,bh=window.innerHeight;
  posX+=vx; posY+=vy;
  if(posX<=0){posX=0;vx=Math.abs(vx);}
  if(posX+vw>=bw){posX=bw-vw;vx=-Math.abs(vx);}
  if(posY<=0){posY=0;vy=Math.abs(vy);}
  if(posY+vh>=bh){posY=bh-vh;vy=-Math.abs(vy);}
  vid.style.left=posX+"px"; vid.style.top=posY+"px";
  requestAnimationFrame(moveVid);
}
requestAnimationFrame(moveVid);

/* Game logic */
const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}resize();addEventListener("resize",resize);
let gameOn=false,score=0;
const ball={x:100,y:100,r:28,vx:3,vy:-6,mul:0.5,maxMul:7,emoji:"ü§û"};
const paddle={w:140,h:16,x:0,y:0};
function resetGame(){
  gameOn=true;score=0;
  ball.x=canvas.width/2;ball.y=200;ball.mul=0.5;
  paddle.x=canvas.width/2-paddle.w/2;paddle.y=canvas.height-80;
  canvas.style.display="block"; document.getElementById("gameOver").style.display="none";
}
function endGame(){
  gameOn=false;
  document.getElementById("finalScore").textContent=score;
  document.getElementById("gameOver").style.display="flex";
}
function exitGame(){
  document.getElementById("gameOver").style.display="none";
  document.getElementById("gameCanvas").style.display="none";
  gameOn=false; score=0;
}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(!gameOn){requestAnimationFrame(draw);return;}
  ball.x+=ball.vx*ball.mul; ball.y+=ball.vy*ball.mul;
  if(ball.x-ball.r<=0||ball.x+ball.r>=canvas.width) ball.vx*=-1;
  if(ball.y-ball.r<=0) ball.vy*=-1;
  ctx.fillStyle="#fff"; ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
  ctx.font=`${ball.r*2}px serif`; ctx.textAlign="center"; ctx.textBaseline="middle"; ctx.fillText(ball.emoji,ball.x,ball.y);
  if(ball.y+ball.r>=paddle.y&&ball.x>=paddle.x&&ball.x<=paddle.x+paddle.w&&ball.vy>0){
    ball.vy=-Math.abs(ball.vy); ball.mul=Math.min(ball.maxMul,ball.mul+0.15); score++;
  }
  if(ball.y-ball.r>canvas.height){endGame();}
  requestAnimationFrame(draw);
}
requestAnimationFrame(draw);

/* Controls */
canvas.addEventListener("mousemove",e=>{paddle.x=Math.max(0,Math.min(canvas.width-paddle.w,e.clientX-paddle.w/2))});
canvas.addEventListener("touchmove",e=>{paddle.x=Math.max(0,Math.min(canvas.width-paddle.w,e.touches[0].clientX-paddle.w/2));e.preventDefault();},{passive:false});
document.getElementById("playGameBtn").onclick=()=>resetGame();
document.getElementById("playAgainBtn").onclick=()=>resetGame();
document.getElementById("exitGameBtn").onclick=()=>exitGame();
document.addEventListener('keydown',e=>{if(e.key==='Escape')exitGame();});

/* Double click/tap start */
document.addEventListener("dblclick",()=>resetGame());
let lastTap=0; document.addEventListener("touchend",()=>{const now=Date.now(); if(now-lastTap<350)resetGame(); lastTap=now;});
</script>
</body>
</html>
