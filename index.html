<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Countdown + Video + Confetti</title>
<style>
  html,body {
    height:100%; margin:0;
    font-family: system-ui, sans-serif;
    color:#fff; background:#000; overflow:hidden;
  }
  body::before {
    content:""; position:fixed; inset:0; z-index:0;
    background:url("bg.jpg") center/cover no-repeat fixed;
  }
  body::after {
    content:""; position:fixed; inset:0; z-index:1;
    background:radial-gradient(ellipse at center, rgba(0,0,0,.2), rgba(0,0,0,.8));
    pointer-events:none;
  }

  /* Video sabit, başta gizli */
  #bgvid {
    position:fixed; z-index:2;
    width:60vw; max-width:800px; height:auto;
    top:50%; left:50%; transform:translate(-50%,-50%);
    display:none;
  }

  .card {
    position:relative; z-index:3;
    max-width:600px; margin:40px auto; padding:20px;
    background:rgba(0,0,0,.6); border-radius:16px; text-align:center;
  }
  .grid {
    display:grid; grid-template-columns:repeat(4,1fr);
    gap:10px; margin:14px 0;
  }
  .box {
    background:rgba(255,255,255,.1);
    padding:14px; border-radius:12px;
  }
  .num { font-size:32px; font-weight:800 }
  .lbl { font-size:12px; opacity:.85 }

  .controls {
    display:flex; justify-content:center; gap:10px; margin-top:12px;
  }
  .btn {
    background:#fff; color:#111; font-weight:800;
    border:none; border-radius:999px; padding:10px 14px; cursor:pointer;
  }
  .btn:active{transform:scale(.97)}

  #startOverlay {
    position:fixed; inset:0; z-index:6;
    display:grid; place-items:center;
    background:rgba(0,0,0,.55);
  }
  #startOverlay button {
    font-size:16px; font-weight:900;
    padding:14px 18px; border-radius:999px;
    border:none; cursor:pointer;
  }
</style>
</head>
<body>
  <video id="bgvid" preload="auto" muted playsinline loop>
    <source src="video.mp4" type="video/mp4">
  </video>

  <main class="card">
    <h1>⏳ Countdown</h1>
    <section class="grid">
      <div class="box"><div id="d" class="num">–</div><div class="lbl">Days</div></div>
      <div class="box"><div id="h" class="num">–</div><div class="lbl">Hours</div></div>
      <div class="box"><div id="m" class="num">–</div><div class="lbl">Minutes</div></div>
      <div class="box"><div id="s" class="num">–</div><div class="lbl">Seconds</div></div>
    </section>
    <div class="controls">
      <button id="musicToggle" class="btn">Play Music</button>
      <button id="musicMute" class="btn">Unmute</button>
    </div>
  </main>

  <div id="startOverlay">
    <button id="startBtn">Start (enable sound)</button>
  </div>

  <audio id="bgmusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
const els = {
  d:document.getElementById("d"),
  h:document.getElementById("h"),
  m:document.getElementById("m"),
  s:document.getElementById("s"),
  vid:document.getElementById("bgvid"),
  music:document.getElementById("bgmusic"),
  musicToggle:document.getElementById("musicToggle"),
  musicMute:document.getElementById("musicMute"),
  startOverlay:document.getElementById("startOverlay"),
  startBtn:document.getElementById("startBtn")
};

const DEADLINE = new Date("2025-10-07T23:59:59");

function pad(n){return String(n).padStart(2,"0")}
function tick(){
  const now = new Date();
  let diff = DEADLINE - now;
  if(diff <= 0){
    els.d.textContent = els.h.textContent = els.m.textContent = els.s.textContent = "00";
    // süre dolduğunda video sabit göster
    els.vid.style.display="block";
    els.vid.play();
    // konfeti patlat
    confetti({particleCount:200,spread:70,origin:{y:0.6}});
    clearInterval(timer);
    return;
  }
  const d = Math.floor(diff/86400000); diff-=d*86400000;
  const h = Math.floor(diff/3600000); diff-=h*3600000;
  const m = Math.floor(diff/60000); diff-=m*60000;
  const s = Math.floor(diff/1000);
  els.d.textContent=d;
  els.h.textContent=pad(h);
  els.m.textContent=pad(m);
  els.s.textContent=pad(s);
}
tick();
const timer=setInterval(tick,1000);

// music controls
let playing=false;
els.musicToggle.onclick=()=>{ if(!playing){ els.music.play(); playing=true; } else { els.music.pause(); playing=false; } };
els.musicMute.onclick=()=>{ els.music.muted=!els.music.muted };
els.startBtn.onclick=async()=>{
  try{ await els.music.play(); playing=true; els.music.muted=false; }catch(e){}
  els.startOverlay.style.display="none";
};
</script>
</body>
</html>
