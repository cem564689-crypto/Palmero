<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Emoji Bounce — Countdown + Global Leaderboard</title>
<style>
  html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,sans-serif;color:#fff;overflow:hidden;background:#000}
  body::before{content:"";position:fixed;inset:0;z-index:0;background:url("bg.jpg") center/cover no-repeat fixed}
  body::after{content:"";position:fixed;inset:0;z-index:1;background:radial-gradient(ellipse at center, rgba(0,0,0,.2), rgba(0,0,0,.8));pointer-events:none}

  /* Video artık sabit ve başta gizli */
  #bgvid{
    position:fixed; z-index:2;
    width:60vw; max-width:800px; height:auto;
    top:50%; left:50%; transform:translate(-50%,-50%);
    display:none;
  }

  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:1}
  #gameCanvas{position:fixed;inset:0;z-index:2;display:none}

  .card{position:relative;z-index:3;max-width:820px;margin:22px auto;padding:26px;background:rgba(0,0,0,.55);border-radius:18px;text-align:center}
  h1{margin:0 0 8px}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:14px 0}
  .box{background:rgba(255,255,255,.10);padding:14px;border-radius:12px}
  .num{font-size:32px;font-weight:800}.lbl{font-size:12px;opacity:.85}

  .controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:12px}
  .btn{background:#fff;color:#111;font-weight:800;border:none;border-radius:999px;padding:10px 14px;cursor:pointer}
  .btn:active{transform:scale(.98)}

  #startOverlay{position:fixed;inset:0;z-index:6;display:grid;place-items:center;background:rgba(0,0,0,.55)}
  #startOverlay button{font-size:16px;font-weight:900;padding:14px 18px;border-radius:999px;border:none;cursor:pointer}

  /* Modal (Username + Game Over) */
  .modal{position:fixed;inset:0;z-index:7;display:none;background:rgba(0,0,0,.55);align-items:center;justify-content:center}
  .modal-card{background:rgba(0,0,0,.78);border-radius:16px;padding:22px;width:min(90vw,380px);text-align:center}
  .actions{display:flex;gap:10px;justify-content:center;margin-top:12px}
  .field{display:flex;gap:8px;justify-content:center;margin-top:12px}
  .input{padding:10px 12px;border-radius:10px;border:none;outline:none;width:60%}
  .note{opacity:.8;font-size:12px;margin-top:6px}

  /* Top3 tablo */
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:8px 10px;text-align:left} th{opacity:.8}
  tr:nth-child(even){background:rgba(255,255,255,.05)}
</style>
</head>
<body>
  <video id="bgvid" preload="auto" muted playsinline loop>
    <source src="video.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <main class="card" aria-live="polite">
    <h1>Emoji Bounce ⏳</h1>
    <section class="grid" aria-label="Countdown">
      <div class="box"><div id="d" class="num">–</div><div class="lbl">Days</div></div>
      <div class="box"><div id="h" class="num">–</div><div class="lbl">Hours</div></div>
      <div class="box"><div id="m" class="num">–</div><div class="lbl">Minutes</div></div>
      <div class="box"><div id="s" class="num">–</div><div class="lbl">Seconds</div></div>
    </section>

    <div class="controls">
      <button id="musicToggle" class="btn">Play Music</button>
      <button id="musicMute" class="btn">Unmute</button>
    </div>
  </main>

  <div id="startOverlay">
    <button id="startBtn">Start (enable sound)</button>
  </div>

  <audio id="bgmusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
const els={d:document.querySelector("#d"),h:document.querySelector("#h"),m:document.querySelector("#m"),s:document.querySelector("#s"),
vid:document.querySelector("#bgvid"),music:document.querySelector("#bgmusic"),
musicToggle:document.querySelector("#musicToggle"),musicMute:document.querySelector("#musicMute"),
startOverlay:document.querySelector("#startOverlay"),startBtn:document.querySelector("#startBtn")};

const DEADLINE=new Date("2025-10-07T23:59:59");
function pad(n){return String(n).padStart(2,"0")}
function tick(){
  const now=new Date(); let diff=DEADLINE-now;
  if(diff<=0){
    els.d.textContent=els.h.textContent=els.m.textContent=els.s.textContent="00";
    // süre dolduğunda video göster + oynat
    els.vid.style.display="block";
    els.vid.play();
    // konfeti patlat
    confetti({particleCount:200,spread:70,origin:{y:0.6}});
    clearInterval(timer);
    return;
  }
  const d=Math.floor(diff/86400000); diff-=d*86400000;
  const h=Math.floor(diff/3600000); diff-=h*3600000;
  const m=Math.floor(diff/60000); diff-=m*60000;
  const s=Math.floor(diff/1000);
  els.d.textContent=d; els.h.textContent=pad(h); els.m.textContent=pad(m); els.s.textContent=pad(s);
}
tick(); const timer=setInterval(tick,1000);

// müzik kontrolleri
let playing=false;
els.musicToggle.onclick=()=>{ if(!playing){ els.music.play(); playing=true; } else { els.music.pause(); playing=false; } };
els.musicMute.onclick=()=>{ els.music.muted=!els.music.muted };
els.startBtn.onclick=async()=>{ try{await els.music.play();playing=true;els.music.muted=false;}catch(e){}; els.startOverlay.style.display="none"; };
</script>
</body>
</html>
